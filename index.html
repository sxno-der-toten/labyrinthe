<!DOCTYPE html>
<html>
<head>
    <title>Labyrinthe</title>
    <style>
        table {
            border-collapse: collapse;
            border-spacing: 0px
        }
        td {
            padding: 0;
            margin: 0;
            display: inline-flex;
            width: 80px; 
            height: 80px;
        }

        img {
        width: 100%;
        height: 100%;
    }
    body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }

    .container {
        text-align: center;
    }

    </style>
</head>
<body>
    <div id="laby"></div>

    <input type="button" value="GO" onclick="startGame();"><br/><br/><br/>

    <script>
        let m = 'm'; //représente un mur
        let p = 'p'; //représente le personnage
        let b = 'b'; //représente le chemin
        let f = "f"; //représente le trophée 

        let xperso = 1; //position initial du personnage sur l'axe X
        let yperso = 1; //postition initial du personnage sur l'axe Y

        let labyCoordinate = [
            [m, m, m, m, m, m, m, m, m, m],
            [m, p, m, b, b, b, b, b, b, m],
            [m, b, m, b, m, m, m, b, m, m],
            [m, b, m, b, m, b, m, b, b, m],
            [m, b, b, b, m, b, m, m, b, m],
            [m, b, m, b, m, b, b, b, b, f],
            [m, m, m, m, m, m, m, m, m, m]
        ];

        function affichage() {
            let elementLaby = document.querySelector("#laby");
            let html = "<table border=0 cellspacing=0 cellpadding=0'>";

            for (let i = 0; i < 7; i++) {
                html += "<tr>";
                for (let j = 0; j < 10; j++) {
                    if (labyCoordinate[i][j] == m) {
                        html += "<td>";
                        html += "<img width='52px' height='52px' src='assets/stonewall.png'>";
                        html += "</td>";
                    }
                    if (labyCoordinate[i][j] == p) {
                        html += "<td>";
                        html += "<img width='52px' height='52px' style='background-image:assets/ground.png' src='assets/kappa.png'>";
                        html += "</td>";
                    }
                    if (labyCoordinate[i][j] == b) {
                        html += "<td>";
                        html += "<img width='52px' height='52px' src='assets/ground.png'>";
                        html += "</td>";
                    }
                    if (labyCoordinate[i][j] == f) {
                        html += "<td>";
                        html += "<img width='52px' height='52px' src='assets/trophy.png'>";
                        html += "</td>";
                    }
                }
                html += "</tr>";
            }

            html += "</table>";
            elementLaby.innerHTML = html;
        }

        function move(dx, dy) {
            let newX = xperso + dx;
            let newY = yperso + dy;

            if (newX >= 0 && newX < labyCoordinate.length && newY >= 0 && newY < labyCoordinate[0].length) {
                if (labyCoordinate[newX][newY] !== m) {
                    labyCoordinate[xperso][yperso] = b;
                    xperso = newX;
                    yperso = newY;
                    labyCoordinate[xperso][yperso] = p;
                    affichage();
                }
            }
        }

        function startGame() {
            affichage(); 
            
            
            document.addEventListener('keydown', function(event) {
                if (event.key === 'ArrowUp') {
                    move(-1, 0); 
                } else if (event.key === 'ArrowDown') {
                    move(1, 0); 
                } else if (event.key === 'ArrowLeft') {
                    move(0, -1); 
                } else if (event.key === 'ArrowRight') {
                    move(0, 1); 
                }
            });
        }
    </script>
</body>
</html>